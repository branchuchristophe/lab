---
interface Props {
  src: string;
  alt: string;
  caption?: string;
  class?: string;
}

const { src, alt, caption, class: className } = Astro.props;

const isVideo = src.endsWith('.mp4') || src.endsWith('.webm');
---

<figure class:list={["my-8", className]}>
  {isVideo ? (
    <video
      src={src}
      autoplay
      loop
      muted
      playsinline
      class="w-full rounded-lg border border-neutral-200/60 dark:border-neutral-800"
    />
  ) : (
    <img
      src={src}
      alt={alt}
      loading="lazy"
      class="w-full rounded-lg border border-neutral-200/60 dark:border-neutral-800"
    />
  )}
  {caption && (
    <figcaption class="mt-3 text-center text-sm text-ink-muted dark:text-neutral-500">
      {caption}
    </figcaption>
  )}
</figure>
